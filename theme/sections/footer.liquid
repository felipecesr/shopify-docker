<!-- /snippets/footer.liquid -->


{%- assign locale_selector = false -%}
{%- assign currency_selector = false -%}

{%- if section.settings.show_currency_selector and shop.enabled_currencies.size > 1 -%}
  {%- assign currency_selector = true -%}
{%- endif -%}

{%- if section.settings.show_locale_selector and shop.published_locales.size > 1 -%}
  {%- assign locale_selector = true -%}
{%- endif -%}

{% assign footer_nav_classes = 'large--one-whole medium--one-whole' %}
{% assign footer_newsletter_classes = '' %}
{% assign footer_social_classes = 'large--two-twelfths desktop-down--one-half' %}

<!-- classes for newsletter but no social icons -->

{% if section.settings.footer_newsletter_enable %}
{% if section.settings.enable_social_icons_footer %}
{% else %}
{% assign footer_nav_classes = 'large--two-thirds medium--one-whole' %}
{% assign footer_newsletter_classes = 'large--one-third medium-down--one-whole' %}
{% endif %}
{% endif %}

<!-- classes for social but no newsletter -->

{% if section.settings.enable_social_icons_footer %}
{% if section.settings.footer_newsletter_enable %}
{% else %}
{% assign footer_nav_classes = 'large--two-thirds medium--one-whole' %}
{% assign footer_social_classes = 'large--one-third medium-down--one-whole' %}
{% endif %}
{% endif %}


<!-- classes for nav, social and newsletter -->
{% if section.settings.footer_newsletter_enable and section.settings.enable_social_icons_footer %}
{% assign footer_nav_classes = 'large--eight-twelfths medium--one-whole' %}
{% assign footer_newsletter_classes = 'large--four-twelfths desktop-down--one-half medium--one-whole' %}
{% assign footer_social_classes = 'large--two-twelfths desktop-down--one-half medium--one-whole' %}
{% endif %}

<!-- begin site-footer -->
<footer class="site-footer "
        role="contentinfo"
        data-section-id="{{ section.id }}"
        data-section-type="footer">
  <div class="wrapper">
    <div class="grid">
      <div class="grid__item">

        <hr class="border-top {% if section.settings.footer_show_top_border == false %}border-top--none{% endif %}">

        <div class="grid footer-top-row">
          <div class="grid__item {{ footer_nav_classes }} footer-grid-nav">
            <!-- begin site-nav -->

            <h3 class="secondary">{{ 'layout.footer.navigation_title' | t }}</h3>

            <ul class="footer-nav" id="AccessibleNav">
              {% for link in linklists[section.settings.footer_linklist].links %}
              <li {% if link.active %}class="site-nav--active"{% endif %}>
                <a href="{{ link.url }}" class="site-nav__link">{{ link.title }}</a>
              </li>
              {% endfor %}
            </ul>
            <!-- //site-nav -->
          </div>

        {% if section.settings.footer_newsletter_enable %}
          <div class="grid__item {{ footer_newsletter_classes }} footer-newsletter footer-grid-newsletter">
           {% comment %}
            MailChimp is the go-to newsletter service for Shopify.
            Use the link below to find your MailChimp form action
            and insert it in your site settings.

            MailChimp newsletter integration and requirement:
             - http://docs.shopify.com/support/configuration/store-customization/where-do-i-get-my-mailchimp-form-action
          {% endcomment %}
          <h3 class="secondary">{{ 'layout.footer.newsletter_title' | t }}</h3>
          {% if section.settings.footer_newsletter_enable %}
            {% comment %}
            Shopify Customer form
            {% endcomment %}
            {% form 'customer' %}
              {{ form.errors | default_errors }}
              {% if form.posted_successfully? %}
                <p class="form--success">{{ 'general.newsletter_form.confirmation' | t }}</p>
              {% else %}
                <div class="input-group">
                  <input type="hidden" name="contact[tags]" value="newsletter">
                  <input type="email"
                    name="contact[email]"
                    id="Email"
                    class="input-group-field newsletter__input"
                    value="{% if customer %}{{ customer.email }}{% endif %}"
                    placeholder="{{ 'general.newsletter_form.newsletter_email' | t }}"
                    autocorrect="off"
                    autocapitalize="off">
                  <span class="input-group-btn">
                    <button type="submit" class="btn newsletter__submit" name="commit" id="Subscribe">
                      <span class="newsletter__submit-text--large">{{ 'general.newsletter_form.submit' | t }}</span>
                    </button>
                  </span>
                </div>
              {% endif %}
            {% endform %}
          {% endif %}

          {% if section.settings.enable_social_icons_footer %}
            <div class="footer__social-block">
              <h3 class="secondary">{{ 'layout.footer.social_title' | t }}</h3>
              {% include 'social', social_location: 'footer' %}
            </div>
          {% endif %}
          </div>
        {% endif %}

        </div>
      </div>

      <div class="grid__item">
        <div class="bottom-row">
           <div class="bottom-row__copyright medium-down--text-center footer-meta">
              <p class="copyright">&copy; {{ 'now' | date: '%Y' }} {{ shop.name | link_to: '/' }}</p>
              <p class="sub-meta">
               <span>{{ powered_by_link }}</span>
              </p>
           </div>

          <div class="bottom-row__payment-and-locale text-right medium-down--text-center">
            {% comment %}
            Loop through available payment methods and show their icons.
            {% endcomment %}
            {% unless shop.enabled_payment_types == empty or section.settings.show_payment_icons == false %}
              <ul class="inline-list payment-icons text-right medium-down--text-center">
                {% for type in shop.enabled_payment_types %}
                  <li>
                    {{ type | payment_type_svg_tag: class:'payment-icon' }}
                  </li>
                {% endfor %}
              </ul>
            {% endunless %}
            {%- if currency_selector or locale_selector-%}
            <div class="locale-selectors">
              {%- form 'localization', class: 'selectors-form' -%}
                    {%- if locale_selector -%}
                      <div class="selectors-form__item">
                        <h2 class="visually-hidden" id="lang-heading">
                          {{ 'general.language.dropdown_label' | t }}
                        </h2>

                        <div class="disclosure" data-disclosure-locale>
                          <button type="button" class="disclosure__toggle" aria-expanded="false" aria-controls="lang-list" aria-describedby="lang-heading" data-disclosure-toggle>
                            {{ form.current_locale.endonym_name }}
                          </button>
                          <ul id="lang-list" class="disclosure-list" data-disclosure-list>
                            {% for locale in form.available_locales %}
                              <li class="disclosure-list__item {% if locale.iso_code == form.current_locale.iso_code %}disclosure-list__item--current{% endif %}">
                                <a class="disclosure-list__option" href="#" lang="{{ locale.iso_code }}" {% if locale.iso_code == form.current_locale.iso_code %}aria-current="true"{% endif %} data-value="{{ locale.iso_code }}" data-disclosure-option>
                                  {{ locale.endonym_name }}
                                </a>
                              </li>
                            {%- endfor -%}
                          </ul>
                          <input type="hidden" name="locale_code" id="LocaleSelector" value="{{ form.current_locale.iso_code }}" data-disclosure-input/>
                        </div>
                      </div>
                    {%- endif -%}

                    {%- if currency_selector -%}
                      <div class="selectors-form__item">
                        <h2 class="visually-hidden" id="currency-heading">
                          {{ 'general.currency.dropdown_label' | t }}
                        </h2>

                        <div class="disclosure" data-disclosure-currency>
                          <button type="button" class="disclosure__toggle" aria-expanded="false" aria-controls="currency-list" aria-describedby="currency-heading" data-disclosure-toggle>
                            {{ form.current_currency.iso_code }} {%- if form.current_currency.symbol -%}{{ form.current_currency.symbol }}{%- endif -%}
                          </button>
                          <ul id="currency-list" class="disclosure-list" data-disclosure-list>
                            {% for currency in form.available_currencies %}
                              <li class="disclosure-list__item {% if currency.iso_code == form.current_currency.iso_code %}disclosure-list__item--current{% endif %}">
                                <a class="disclosure-list__option" href="#" {% if currency.iso_code == form.current_currency.iso_code %}aria-current="true"{% endif %} data-value="{{ currency.iso_code }}" data-disclosure-option>
                                  {{ currency.iso_code }} {%- if currency.symbol -%}{{ currency.symbol }}{%- endif -%}
                                </a>
                              </li>
                            {%- endfor -%}
                          </ul>
                          <input type="hidden" name="currency_code" id="CurrencySelector" value="{{ form.current_currency.iso_code }}" data-disclosure-input/>
                        </div>
                      </div>
                    {%- endif -%}
                {%- endform -%}

            </div><!-- /.locale-selectors -->
            {%- endif - %}
           </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<!-- //site-footer -->

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "link_list",
      "id": "footer_linklist",
      "label": "Menu",
      "default": "footer",
      "info": "This menu won't show dropdown items"
    },
    {
      "type": "checkbox",
      "id": "footer_newsletter_enable",
      "label": "Show newsletter field"
    },
    {
      "type": "checkbox",
      "id": "enable_social_icons_footer",
      "label": "Show social icons",
      "info": "Social icons are configured under General Settings"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "footer_show_top_border",
      "label": "Show top border"
    },
    {
      "type": "header",
      "content": "Language Selector",
      "info": "To add a language, go to your [language settings.](/admin/settings/languages)"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "Show language selector",
      "default": true
    },
    {
      "type": "header",
      "content": "Currency Selector",
      "info": "To add a currency, go to your [currency settings.](/admin/settings/payments)"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "Show currency selector",
      "default": true
    }
  ]
}
{% endschema %}
